add_executable(chess
    main.cpp
    src/draw_board.cpp
    src/event_handler.cpp)
set_target_properties(chess PROPERTIES LINK_FLAGS_DEBUG "/SUBSYSTEM:CONSOLE")
set_target_properties(chess PROPERTIES LINK_FLAGS_RELEASE "/SUBSYSTEM:WINDOWS")

#set(CMAKE_TOOLCHAIN_FILE "$ENV{VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake" CACHE STRING "Vcpkg toolchain file")
include("$ENV{VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake")

find_package(NanoSVG REQUIRED)
target_link_libraries(chess PRIVATE NanoSVG::nanosvg NanoSVG::nanosvgrast)

#Include SFML
set(SFML_STATIC_LIBRARIES TRUE)
if (CMAKE_BUILD_TYPE STREQUAL "DEBUG")
    find_package(SFML 2.6
        COMPONENTS
            system-d window-d graphics-d audio-d REQUIRED
    )
    install(FILES $<TARGET_PDB_FILE:${chess}> DESTINATION bin OPTIONAL)
else()
    find_package(SFML 2.6
        COMPONENTS
            system window graphics audio REQUIRED
    )
endif()

target_compile_features(chess PRIVATE cxx_std_20)
target_compile_definitions(chess PRIVATE SFML_DYNAMIC)
target_link_libraries(chess PRIVATE sfml-window sfml-graphics)
